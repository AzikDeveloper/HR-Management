{% extends 'hrm/main.html' %}
{% block content %}
{% load custom_tags %}
<style>
    .table {
        border-collapse: collapse;
        margin: 20px 0px;
        font-size: 0.9em;

        box-shadow: 0 0 20px rgba(0, 0, 0, 0.25);
    }

    .table tbody tr:last-of-type {
        border-bottom: 1px solid #000000;
    }
</style>
<div class="all">
    <br>
    <section class="px-0">
        <div class="container-fluid">
            <div class="row g-3">
                <div class="col-lg-3 col-md-8 pb-3">
                    <div class="card p-3">
                        <div class="d-flex align-items-center">
                            <div class="image"><img
                                    src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=80"
                                    class="rounded" width="155"></div>
                            <div class="ml-3 w-100">
                                <h4 class="mb-0 mt-0">{{employee.first_name}} {{employee.last_name}}</h4> <span>@{{employee.username}}</span>
                                <div class="p-2 mt-2 bg-info bg-gradient d-flex justify-content-between rounded text-white stats">
                                    <div class="d-flex flex-column"><span class="articles">Total</span> <span
                                            class="number1">{{tasks_count}}</span></div>
                                    <div class="d-flex flex-column"><span class="followers">Done</span> <span
                                            class="number2">{{tasks_done_count}}</span></div>
                                    <div class="d-flex flex-column"><span class="rating">Rating</span> <span
                                            class="number3">8.9</span></div>
                                </div>
                                <div class="button mt-2 d-flex flex-row align-items-center">
                                    <button class="btn btn-sm btn-outline-primary w-100">Profile Settings</button>
                                    <button class="btn btn-sm btn-outline-primary w-100 ml-2">Site Settings</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Notifications-->
                <div class="col-lg-3 col-md-4 pb-3">
                    <div class="card card-body">
                        <h5>Notifications</h5>
                        <hr>
                        <div class="overflow-auto" style="max-height: 93px" id="notificationScroll">
                            {% for notification in notifications %}
                            <div class="d-flex p-1 pb-0">
                                <div class="col-4">
                                    <b>{{notification.sender}}</b>
                                </div>
                                <div class="col-4">
                                    <small>{{notification.text|max_len:10}}</small>
                                </div>
                                <div class="col-4">
                                    <button type="button" style="padding: 0px 2px 0px 2px;"
                                            class="btn btn-sm btn-outline-secondary">read
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col pb-3">
                    <div class="card card-body" style="height: 198px">
                        <h5>Total Tasks</h5>
                        <hr>
                        <h1 style="text-align: center;padding: 10px">{{tasks_count}}</h1>
                    </div>
                </div>
                <div class="col pb-3">
                    <div class="card card-body" style="height: 198px">
                        <h5>Tasks Done</h5>
                        <hr color="green">
                        <h1 style="text-align: center;padding: 10px">{{tasks_done_count}}</h1>
                    </div>
                </div>
            </div>

        </div>
    </section>
    {% include 'hrm/tasks/tasks_table.html' with section_style='px-0 pt-4' %}
    <script>
        var element = document.getElementById("notificationScroll");
        element.scrollTop = element.scrollHeight;

    </script>
</div>
{% endblock %}