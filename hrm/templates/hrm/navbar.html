{% load static %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item {{home_active}}">
                <a class="nav-link" href="{% url 'home' %}">Home</a>
            </li>
            {% if request.user.employee.position.name != 'Employee' %}
            <li class="nav-item {{tasks_active}}">
                <a class="nav-link" href="{% url 'tasks' %}">Tasks</a>
            </li>
            {% endif %}
            {% if request.user.employee.position.name == "Director" %}
                <li class="nav-item dropdown {{sections_active}}">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {% if section %}
                        {{section}}
                        {% else %}
                        Sections
                        {% endif %}
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        {% for section in sections %}
                            <a class="dropdown-item" href="{% url 'section' section.id %}">{{section}}</a>
                        {% endfor %}
                        <div class="dropdown-divider"></div>
                        <a type="button" class="dropdown-item" data-toggle="modal" data-target="#addSectionModal">Add section</a>
                    </div>
                </li>
            {% endif %}

            {% if request.user.employee.position.name == 'Manager' %}
            <li class="nav-item {{section_active}}">
                <a class="nav-link" href="{% url 'my_section' %}">{{request.user.employee.section}}</a>
            </li>
            {% endif %}
        </ul>
    </div>
     <div class="form-inline my-2 my-lg-0">
         <span style="color: #fff;">&nbsp &nbsp &nbsp{{request.user}}&nbsp</span>&nbsp;
         <span><a style="color: #fff;" href="{% url 'logout' %}">Log out</a> </span>
     </div>

</nav>
{% if request.user.employee.position.name == 'Director' %}
    <!-- Modal -->
    <div class="modal fade" id="addSectionModal" tabindex="-1" role="dialog" aria-labelledby="addSectionModal" aria-hidden="true">
          <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form action="{% url 'add_section' %}" method="post">
                        {% csrf_token %}
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Add section</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <label for="section_name" class="label">Enter name</label>
                            <input type="hidden" name="next" value="{{request.path}}">
                            <input id="section_name" autocomplete="off" spellcheck="false" name="section_name"  type="text" class="form-control" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="Submit" class="btn btn-primary">Add</button>
                        </div>
                    </form>
                </div>
          </div>
    </div>
{% endif %}
